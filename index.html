<!DOCTYPE html>
  <html>

  <head>
    <meta property="og:image" content="https://raw.github.com/2dom/PixelTimes/master/images/PixelTime_animated.GIF" />
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Animated picture frame of your 8 bit dreams" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>PixelTimes</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/2dom/PixelTimes">View on GitHub</a>

          <h1 id="project_title">PixelTimes</h1>
          <h2 id="project_tagline">Animated picture frame of your 8 bit dreams</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/2dom/PixelTimes/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/2dom/PixelTimes/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/front_anim2.gif" alt="Drop">

        <h2>Rationale</h2>
        This project is the logical progression of <a href="https://2dom.github.io/PixelTime">PixelTime</a> and attempts to reduce the amount of manual labor to an absolute minimum. This also minimizes the build time whilst removing most of the complexity of building a case leading essentially to a plug and play kit. With all components on the table, it took me about two hours to assemble the entire display. <br>
        <br>
        In terms of functionality, I created a new display library PxMatrix that is more capable than the original P10_Matrix library. In now supports 3bit color per RGB channel and can handle animations with minimal flicker. This opened up the possibility to create a nice little 32x16 picture frame for pixel animations.
        <h2>Tools</h2>
        In order to create all the components for this display you will need (access to) the following tools:<br>
        <ul>
          <li>Laser cutter</li>
          <li>3D printer and black filament</li>
          <li>A3 laser printer</li>
          <li>Metal file</li>
          <li>Wire stripper</li>
          <li>Screwdriver</li>
          <li>Scissors</li>
        </ul>
        Your local makerspace should have most of those tools, otherwise you may consider using online services.<br>
        <h2>Make the display</h2>
        So let's get started! This image shows all the parts that you will make ... I will got through the necessary steps one-by-one.

        <h3>Front and back-plate</h3>
        These are two identical laser-cut parts. I used 3mm acrylics with 50% gray. The corresponding file "led_clock2_cut" is available <a href="https://github.com/2dom/PixelTimes">here</a>
        <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/all_parts.jpg" alt="Drop">

        <h3>NodeMCU and panel mount</h3>
          If your NodeMCU comes with pre-soldered pin-headers, cut them off above the spacers and use a file to grind them level. Next, 3D print my NodeMCU panel mount available <a href="https://www.thingiverse.com/thing:2665294">here</a>.<br>
        The panel mount integrates the NodeMCU into the frame and lets you push the buttons from the outside.
        <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/node_mcu_cut.jpg" alt="Drop">

        <h3>Prepare display</h3>
           Connect the display to the NodeMCU as described <a href="https://github.com/2dom/PxMatrix">here</a>. Also cut the frame of the display in the bottom right corner to make space for the NodeMCU. Then install the NodeMCU into the NodeMCU panel mount and screw it to the cut-out frame segment.
          <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/matrix_back.jpg" alt="Drop">

        <h3>Frame segments</h3>
        The design files for the frame segment can be downloaded <a href="https://www.thingiverse.com/thing:2854261">here</a>. You will need to print 11 standard ones and one with a cutout for the NodeMCU panel mount. The segments form a series of chain-links that are sandwiched between the front- and back-plate.
        <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/frame_detail1.jpg" alt="Drop">
        <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/frame_detail2.jpg" alt="Drop">

        <h3>LED matrix separator grid</h3>
        Print the 16x16 grid from <a href="https://www.thingiverse.com/thing:2668845">here</a> two times and glue it together (super glue works fine) to form one 32x16 grid
        <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/separator.jpg" alt="Drop">

        <h3>Front and back paper-screen</h3>
        (Modify) and print the “led_clock_back” and “led_clock_diff” from <a href="https://github.com/2dom/PixelTimes">here</a> and cut them out.

        <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/screen_cut.jpg" alt="Drop">
        <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/back_cut.jpg" alt="Drop">


        <h2>Assembly</h2>
        We will start from the back and build the display up step-by-step.<br>
        First, stick all screws through the first piece of acrylic and put it screw-heads down on the table.<br>
        <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/step1.jpg" alt="Drop">
        Then install the paper-screen (backside - “led_clock_back”) where the print side faces downwards. <br>
        <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/step2.jpg" alt="Drop">

        Next, we install all the frame segments by placing them on the screws one-by-one. Make sure that you leave a gap at the bottom right where the NodeMCU panel mount will live. (Note that you will have to follow the correct up-down sequence of the segments so it will fit). <br>
        <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/step3.jpg" alt="Drop">

        Now place the panel in the frame and install the NodeMCU panel mount.<br>
        <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/step4.jpg" alt="Drop">

        You can now place the separator grid on top and make sure everything fits ok.<br>
        <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/step5.jpg" alt="Drop">

        If it does, fix the separator grid to the matrix using 4 pieces of PVC tape around the corners.<br>
        <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/step6.jpg" alt="Drop">

        In order to center the grid and matrix within the frame I wedged a few pieces of anti-static foam in between.<br>
        <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/step8.jpg" alt="Drop">
        <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/spacers_installed.jpg" alt="Drop">

        Almost done now. Install the paper-screen (diffuser - “led_clock_diff”) with the print facing upward.<br>
        <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/step9.jpg" alt="Drop">

        Finally place the 2nd piece of acrylics on top.<br>
        <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/step10.jpg" alt="Drop">

        Fasten all screws with the corresponding nuts and voila … display done.<br>
        <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/step11.jpg" alt="Drop">















      <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/front_anim2.gif" alt="Drop">
             <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/back.jpg" alt="Drop">
         <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/logo.jpg" alt="Drop">
        <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/logo2.jpg" alt="Drop">
         <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/connector.jpg" alt="Drop">
       <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/girl.gif" alt="Drop">
           <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/shark.gif" alt="Drop">
          <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master/images/lamp.gif" alt="Drop">

        This project is a logical progression of <a href="https://2dom.github.io/PixelTime/">PixelTime</a> and the
        <a href="https://github.com/2dom/P10_matrix">P10_matrix library</a>.

        As the P10_matrix library became more capable, PixelTime was simply a bit boring to look at 24/7. So I started playing with 32x16 gif animations and decided that the P10 matrix would make an excellent little nerdy picture frame. Animation playback was actually rather straightforward. What ate most of my time was the latency optimizations to reduce flicker.
        <h2>Hardware</h2>
        To create a nice looking square pixel display is easy ... simply follow the instructions on the <a href="https://2dom.github.io/PixelTime/">PixelTime</a> page. In essence, a bare 32x16 LED matrix may work for large scale displays but is rather painful to look at if you are up-close. There is simply too much space between the individual LEDs and they are extremely bright. So we need to shape the form of each pixel and diffuse the light sufficiently so we gain am evenly lit surface.<br><br>

        For that purpose I created a 3d printable <a href="https://www.thingiverse.com/thing:2668845">separator grid</a> that results in nice 1x1cm pixels. The diffuser is simply a sheet of A3 paper.
        For extra style add a gray/transparent sheet of acrylics to the front and put it in a nice box.<br>

        <h2>Software</h2>
        To get this to work you will need to perform the following steps
        <ul>
          <li>Install <a href="https://www.arduino.cc/en/Main/Software">Arduino</a></li>
          <li>Install <a href="https://www.arduino.cc/en/Main/Software">ESP8266 core for Arduino</a></li>
          <li>Install the <a href="http://esp8266.github.io/Arduino/versions/2.0.0/doc/filesystem.html">SPIFFS upload tool</a>.</li>
          <li>Download the the <a href="https://github.com/2dom/P10_matrix">P10_matrix</a> library and move it to your libraries folder. Connect your LED matrix as described on the  library web-page.</li>
          <li>Connect your ESP8266/NodeMCU to your computer</li>
          <li>Open the PixelTimes project in Arduino and select the "ESP8266 Sketch Data Upload" from the tools menu. This will write some some initial animations to the EPS8266/NodeMCU's flash memory.</li>
          <li>Compile PixelTimes.ino and flash it to ESP8266/NodeMCU</li>
        </ul>
        <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master//images/fireworks.gif" alt="FireWorks">

        <h2>Create animations</h2>
        You can really use any video/gif file as a source for your animations, however, low-res gif animations probably make the most sense. Sources for 16x16 animations are:
        <br><br>
        <ul>
          <li><a href="https://db.eboy.com/pool/everything/1">Eboy</a> - their animations are fantastic - all animations shown on this page are from there - and they sell robots too! As I was told by Eboy, most of these animations were actually created to fit a neat (commercially available) animated picture-frame called <a href="https://ledseq.com/product/game-frame/">GameFrame</a>.</li>
          <li><a href="http://www.drawbang.com/">Draw!</a></li>
        </ul>
        Since the P10 matrix is 32x16 you will have to modify these animations to fit the display (I used Gimp). Once you have a bunch of 32x16 gifs in a folder you can simply execute the following script (also in the gifs folder):
<br><br>
        <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #888888">#!/bin/bash</span>
          <span style="color: #008800; font-weight: bold">for </span>i in *.gif;
          <span style="color: #008800; font-weight: bold">do</span>
  <span style="color: #008800; font-weight: bold">          </span><span style="color: #996633">base_name</span><span style="color: #333333">=</span><span style="color: #008800; font-weight: bold">$(</span>basename <span style="background-color: #fff0f0">&quot;$i&quot;</span> .gif<span style="color: #008800; font-weight: bold">)</span>
            ffmpeg -i <span style="color: #996633">$i</span> -vf <span style="background-color: #fff0f0">&#39;lutyuv=y=gammaval(1.4)&#39;</span> -vcodec rawvideo -pix_fmt rgb24 <span style="color: #996633">$base_name</span>.rgb
          <span style="color: #008800; font-weight: bold">done</span>
  </pre></div>
<br>
        This will generate .rgb (raw data) animation files for the ESP. Last but not least, copy all .rgb files in the /data folder of the PixelTimes Arduino project and re-upload via ESP8266 Sketch Data Upload tool.

        <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master//images/lighthouse.gif" alt="Lighthouse">

        <h2> Merge with PixelTime</h2>
        Since the weather information from <a href="https://2dom.github.io/PixelTime/">PixelTime</a> is still somewhat useful I decided to retain that functionality. You can now switch between animations and weather display using the PRGM switch on the ESP8266/NodeMCU (e.g. exposed via the <a href="https://www.thingiverse.com/thing:2665294">NodeMCU panel mount</a>). So you can either enjoy this:


        <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master//images/PixelTime.jpg" alt="PixelTime">

        or this:

        <img width="100%" align="center" src="https://raw.github.com/2dom/PixelTimes/master//images/sea.gif" alt="Sea">



<h2>Bill of materials</h2>

<p>Check <a href="https://2dom.github.io/PixelTime/">PixelTime</a> for building instructions</p>

<ul>
<li>P10 LED Matrix (Aliexpress) – 17 EUR</li>
<li>Dupond jumper cables (Aliexpress) – 0.5 EUR</li>
<li>NodeMCU ESP8266 – 3 EUR</li>
<li>Acrylics – 10 EUR</li>
<li>3D prints – 3 EUR (plastics)</li>
<li>2A USB charger and 2m cable (ebay) – 8 EUR</li>
<li>M3x50mm screws and nuts – 2 EUR</li>
<li>Box – Free</li>
<li><strong>TOTAL: 43 EUR</strong></li>
</ul>


      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">PixelTimes is maintained by <a href="https://github.com/2dom">2dom</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>



  </body>
</html>
